<div class="container">
  <h1 class="text-center my-4">
    <% case current_user.role %>
    <% when 'admin' %>
      Todas as Reservas
    <% when 'court_owner' %>
      Reservas das Minhas Quadras
    <% else %>
      Minhas Reservas
    <% end %>
  </h1>

  <% unless current_user.court_owner? %>
    <a href="<%= new_reservation_path %>" class="btn btn-primary mb-3">
      <i class="bi bi-plus-circle"></i> Nova Reserva
    </a>
  <% end %>

  <ul class="list-group">
    <% @reservations.each do |reservation| %>
      <li class="list-group-item">
        <div class="d-flex justify-content-between align-items-start">
          <div class="ms-2 me-auto">
            <div class="fw-bold"><%= reservation.court.name %></div>
            <div>
              Data: <%= l(reservation.date, format: :long) %><br>
              Horário: <%= l(reservation.start_time, format: :time) %> - <%= l(reservation.end_time, format: :time) %>
              <% if current_user.admin? || current_user.court_owner? %>
                <br>
                <span class="text-muted">Reservado por: <%= reservation.user.name %></span>
              <% end %>
            </div>
          </div>
          
          <% if can? :destroy, reservation %>
            <%= button_to "Cancelar Reserva", 
                reservation_path(reservation), 
                method: :delete, 
                class: "btn btn-danger btn-sm", 
                data: { confirm: "Tem certeza que deseja cancelar esta reserva?" } %>
          <% end %>
        </div>
      </li>
    <% end %>
  </ul>

  <% if @reservations.empty? %>
    <div class="alert alert-info mt-3">
      <% case current_user.role %>
      <% when 'admin' %>
        Não há reservas cadastradas.
      <% when 'court_owner' %>
        Não há reservas para suas quadras.
      <% else %>
        Você ainda não tem nenhuma reserva.
      <% end %>
    </div>
  <% end %>
</div>
